<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	template="/template/template.xhtml">

	<ui:define name="title">角色资源分配</ui:define>

	<ui:define name="content">

		<input type="hidden" id="menuOne" value="M101" />
		<input type="hidden" id="menuTwo" value="M10103" />
		<h:form id="roleInputForm" prependId="false" onsubmit="statusComplete();">
			<p:panel styleClass="panel1">
				<f:facet name="header">
					<img
						src="#{request.contextPath}/images/calculator_edit.png"
						alt="" />
					<h:outputLabel value="角色资源管理       " />
					<div class="header_title_right">
					<img src="#{request.contextPath}/images/icons/shortcuts.gif" alt="" />
					<p:commandLink  value="角色管理" id="roleGuanli"
						immediate="true" action="#{roleBean.roleList}" ajax="false" />
					</div>
				</f:facet>
				<p:message id="roleTableForm" for="roleTableForm"></p:message>
				<div class="style1">
					<h:panelGrid columns="2" cellpadding="5" cellspacing="1"
						columnClasses="column0,column2,column0,column2">

						<h:outputLabel value="角色名称：" />
						<p:inputText disabled="true" id="roleName"
							value="#{roleBean.currentRole.roleName}" />

						<h:outputLabel value="角色资源：" />
						<p:tree value="#{roleBean.root}" var="node" style="width:400px;"
							selectionMode="checkbox" selection="#{roleBean.selectedNodes}"
							propagateSelectionUp="true" propagateSelectionDown="true"
							nodeSelectListener="#{roleBean.onTreeNodeClicked}">
							<p:treeNode>
								<h:outputText value="#{node}" />
							</p:treeNode>
						</p:tree>
					</h:panelGrid>
					<div>
						<p:commandButton action="#{roleBean.saveRoleResource}" value="保存"
							id="saveRoleResourceId" image="ui-icon ui-icon-disk" 
							ajax="false">
							<f:param name="flag" value="1" />
							<f:param name="roleId" value="#{roleBean.currentRole.id}" />
						</p:commandButton>
					</div>

				</div>
			</p:panel>

		</h:form>
		<br />
	</ui:define>

</ui:composition>

