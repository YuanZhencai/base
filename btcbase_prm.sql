DROP TABLE DICT;
DROP TABLE RESOURCE;
DROP TABLE REVINFO;
DROP TABLE ROLE;
DROP TABLE ROLE_RESOURCE;
DROP TABLE STOREDLOG;
DROP TABLE USER;
DROP TABLE USER_ROLE;


CREATE TABLE DICT ( ID BIGINT NOT NULL, CREATED_BY VARCHAR(30), CREATED_DATETIME TIMESTAMP, DEFUNCT_IND SMALLINT, UPDATED_BY VARCHAR(30), UPDATED_DATETIME TIMESTAMP, CODE VARCHAR(30) NOT NULL, NAME VARCHAR(30) NOT NULL, PARENT_CODE VARCHAR(30), VALUE VARCHAR(30), PRIMARY KEY (ID) );
CREATE TABLE RESOURCE ( ID BIGINT NOT NULL, ISMENU SMALLINT, LEVEL VARCHAR(255), NAME VARCHAR(255), NUMBER VARCHAR(255), PARENT_ID BIGINT, TYPE VARCHAR(255), URI VARCHAR(255), PRIMARY KEY (ID) );
CREATE TABLE REVINFO ( REV INTEGER NOT NULL GENERATED BY DEFAULT AS IDENTITY, REVTSTMP BIGINT, PRIMARY KEY (REV) );
CREATE TABLE ROLE ( ID BIGINT NOT NULL, IS_ADMIN SMALLINT, DESCRIPTION VARCHAR(255), ROLE_NAME VARCHAR(255), ROLE_SCOPE VARCHAR(255), STATE INTEGER NOT NULL, PRIMARY KEY (ID) );
CREATE TABLE ROLE_RESOURCE ( ID BIGINT NOT NULL, RESOURCE_ID BIGINT, ROLE_ID BIGINT, PRIMARY KEY (ID) );
CREATE TABLE STOREDLOG ( ID BIGINT NOT NULL, LOGLEVEL VARCHAR(255), LOGDTTM TIMESTAMP, THROWABLEMESSAGE VARCHAR(255), USERMESSAGE VARCHAR(255), WHERECLASS VARCHAR(255), PRIMARY KEY (ID) );
CREATE TABLE USER ( ID BIGINT NOT NULL, CELLPHONE_NO VARCHAR(30), CONTACT_ADDRESS VARCHAR(60), CONTACT_TELEPHONE_NO VARCHAR(30), DEFUNCT_IND SMALLINT, EMAIL VARCHAR(240), NAME VARCHAR(30), PURCHASE_ENTITY_NAME VARCHAR(60), PURCHASE_LOC_NAME VARCHAR(60), USER_NAME VARCHAR(18) NOT NULL, PRIMARY KEY (ID) );
CREATE TABLE USER_ROLE ( ID BIGINT NOT NULL, ROLE_ID BIGINT, USER_ID BIGINT, PRIMARY KEY (ID) );

insert into ROLE (ID, IS_ADMIN, DESCRIPTION, ROLE_NAME, ROLE_SCOPE, STATE) values (1, 1, null, 'test', 'test', 1);

insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (1, 0, '0', '系统管理', 'M1', 0, 'url', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (2, 0, '1', '权限管理', 'M101', 1, null, null);
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (3, 1, '2', '用户管理', 'M10101', 2, 'url', '/faces/permissions/user/list.xhtml');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (4, 0, '3', '组织用户分配', 'M1010101', 3, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (5, 0, '3', '查询', 'M1010102', 3, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (6, 0, '3', '查看', 'M1010103', 3, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (7, 0, '3', '角色设置', 'M1010104', 3, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (8, 0, '3', '组织分配', 'M1010105', 3, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (9, 1, '2', '角色管理', 'M10102', 2, 'url', '/faces/permissions/role/list.xhtml');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (10, 0, '3', '添加角色', 'M1010201', 9, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (11, 0, '3', '查询', 'M1010202', 9, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (12, 0, '3', '编辑', 'M1010203', 9, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (13, 0, '3', '查看', 'M1010204', 9, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (14, 0, '3', '删除', 'M1010205', 9, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (15, 0, '3', '角色资源设置', 'M1010206', 9, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (16, 0, '2', '角色设置', 'M10103', 2, 'url', '/faces/permissions/user/user-role.xhtml');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (17, 0, '3', '用户管理', 'M1010301', 16, 'component', '');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (18, 0, '2', '角色资源', 'M10104', 2, 'url', '/faces/permissions/role/resource-role.xhtml');
insert into RESOURCE (ID, ISMENU, LEVEL, NAME, NUMBER, PARENT_ID, TYPE, URI) values (19, 0, '3', '角色管理', 'M1010401', 18, 'component', '');

insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (1, 1, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (2, 2, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (3, 3, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (4, 4, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (5, 5, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (6, 6, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (7, 7, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (8, 8, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (9, 9, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (10, 10, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (11, 11, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (12, 12, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (13, 13, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (14, 14, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (15, 15, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (16, 16, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (17, 17, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (18, 18, 1);
insert into ROLE_RESOURCE (ID, RESOURCE_ID, ROLE_ID) values (19, 19, 1);

insert into USER (ID, CELLPHONE_NO, CONTACT_ADDRESS, CONTACT_TELEPHONE_NO, DEFUNCT_IND, EMAIL, NAME, PURCHASE_ENTITY_NAME, PURCHASE_LOC_NAME, USER_NAME) values (1, null, null, null, 0, '315917526@qq.com', 'admin', null, null, 'Admin');

insert into USER_ROLE (ID, ROLE_ID, USER_ID) values (1, 1, 1);

ALTER TABLE ROLE_RESOURCE ADD CONSTRAINT FKAEE599B76874B0EE FOREIGN KEY (RESOURCE_ID) REFERENCES RESOURCE (ID);
ALTER TABLE ROLE_RESOURCE ADD CONSTRAINT FKAEE599B7FFC191EE FOREIGN KEY (ROLE_ID) REFERENCES ROLE (ID);
ALTER TABLE USER_ROLE ADD CONSTRAINT FK143BF46AA4EC55CE FOREIGN KEY (USER_ID) REFERENCES USER (ID);
ALTER TABLE USER_ROLE ADD CONSTRAINT FK143BF46AFFC191EE FOREIGN KEY (ROLE_ID) REFERENCES ROLE (ID);
