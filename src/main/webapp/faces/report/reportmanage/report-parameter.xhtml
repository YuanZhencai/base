<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:c="http://java.sun.com/jsp/jstl/core">


	<h:form id="reportParameterForm" prependId="false">
		<p:dialog header="报表参数配置" widgetVar="reportParameterDialog"
			id="reportParameterDlg" resizable="false" modal="true">
			<p:messages id="reportParameterMsg" />
			<p:panel>
				<f:facet name="header">报表参数信息</f:facet>

				<h:panelGrid id="eportParameterItemDataPanel" columns="6"
					cellpadding="5" cellspacing="1" rowClasses="row1,row2"
					columnClasses="column2,column2,column2,column2,column2,column2"
					footerClass="footer1">
					<h:outputText value="报表参数编码：" />
					<h:panelGroup>
						<p:inputText id="report_parameter_code"
							value="#{reportParameterBean.instance.reportParameterCode}"
							required="true" requiredMessage="报表参数编码不能为空！" />
						<h:outputText style="color:red;" value="  *" />
					</h:panelGroup>

					<h:outputText value="参数显示名称：" />
					<h:panelGroup>
						<p:inputText id="ui_label"
							value="#{reportParameterBean.instance.uiLabel}" required="true"
							requiredMessage="参数显示名称不能为空！" />
						<h:outputText style="color:red;" value="  *" />
					</h:panelGroup>

					<h:outputLabel value="参数显示名称(英文)：" />
					<p:inputText id="ui_label_lang"
						value="#{reportParameterBean.instance.uiLabelLang}" />

					<h:outputLabel value="控件类型：" />
					<h:panelGroup>
						<h:selectOneMenu id="ui_type"
							value="#{reportParameterBean.instance.uiType}" required="true"
							requiredMessage="控件类型必须选择！">
							<f:selectItem itemLabel="--请选择--" />
							<f:selectItems value="#{reportParameterBean.controlTypeList}" />
							<p:ajax event="change" listener="#{reportParameterBean.onSelectItemChange}" update=":reportParameterForm:sqlPanelGrid" />
						</h:selectOneMenu>
						<h:outputText style="color:red;" value="  *" />
					</h:panelGroup>

					<h:outputLabel value="java数据类型：" />
					<h:panelGroup>
						<h:selectOneMenu id="java_data_type"
							value="#{reportParameterBean.instance.javaDataType}"
							required="true" requiredMessage="java数据类型必须选择！">
							<f:selectItem itemLabel="--请选择--" />
							<f:selectItems value="#{reportParameterBean.javaDataTypeList}" />
						</h:selectOneMenu>
						<h:outputText style="color:red;" value="  *" />
					</h:panelGroup>
					
					<h:outputLabel value="参数默认值：" />
					<p:inputText id="default_value"
						value="#{reportParameterBean.instance.defaultValue}" />

					<h:outputText value="是否可编辑：" />
					<h:selectBooleanCheckbox id="edit_ind"
						value="#{reportParameterBean.instance.editInd}"
						styleClass="selectBooleanCheckbox" />

					<h:outputText value="必选参数：" />
					<h:selectBooleanCheckbox id="mandatory_ind"
						value="#{reportParameterBean.instance.mandatoryInd}"
						styleClass="selectBooleanCheckbox" />

					<h:outputText value="是否显示：" />
					<h:selectBooleanCheckbox id="display_ind"
						value="#{reportParameterBean.instance.displayInd}"
						styleClass="selectBooleanCheckbox" />
				</h:panelGrid>

				<h:panelGrid id="sqlPanelGrid" columns="2">
					<h:outputLabel value="SQL："
						rendered="#{reportParameterBean.sqlIsDisable}" />
					<p:inputTextarea id="sql_statement"
						value="#{reportParameterBean.instance.sqlStatement}"
						maxLength="2000" maxHeight="60" style="width:740px; height: 60px;"
						rendered="#{reportParameterBean.sqlIsDisable}" />
				</h:panelGrid>

				<h:panelGrid columns="2">
					<h:outputLabel value="备注：" />
					<p:inputTextarea id="reportParameter_remarks"
						value="#{reportParameterBean.instance.remarks}" maxLength="600" maxHeight="120"
						styleClass="textarea_420" />
				</h:panelGrid>
				
				<div style="text-align: right; margin: 5px 0;">
					<h:panelGroup id="buttonGroup">
						<p:commandButton disabled="#{reportParameterBean.buttonIsDisable}"
							image="ui-icon ui-icon-plus" value="增加" 
							actionListener="#{reportParameterBean.saveParameter}"
							update="reportParameterDataTable, reportParameterMsg, eportParameterItemDataPanel, buttonGroup"
							style="margin: 0 3px;" />
						<p:commandButton disabled="#{!reportParameterBean.buttonIsDisable}"
							image="ui-icon ui-icon-close" value="删除"
							actionListener="#{reportParameterBean.deleteParameter}"
							update="reportParameterDataTable, reportParameterMsg, eportParameterItemDataPanel, buttonGroup"
							style="margin: 0 3px;" />
						<p:commandButton disabled="#{!reportParameterBean.buttonIsDisable}"
							image="ui-icon ui-icon-pencil" value="更新"
							actionListener="#{reportParameterBean.saveParameter}"
							update="reportParameterDataTable, reportParameterMsg, eportParameterItemDataPanel, buttonGroup"
							style="margin: 0 3px;" />
						<p:commandButton image="ui-icon ui-icon-cancel" value="清除" 
							actionListener="#{reportParameterBean.clearParameter}" process="@this"
							update="eportParameterItemDataPanel, reportParameterMsg, buttonGroup"
							style="margin: 0 3px;" />
					</h:panelGroup>
				</div>
			</p:panel>
			<br />

			<h:panelGroup id="reportParameterDataPanel">
				<p:dataTable id="reportParameterDataTable" var="reportParameter"
					value="#{reportParameterBean.reportParameterList}" paginator="true"
					rows="10" paginatorPosition="bottom"
					paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
					selectionMode="single" rowKey="#{reportParameter.id}">

					<p:ajax event="rowSelect"
						listener="#{reportParameterBean.onRowSelect}"
						update="eportParameterItemDataPanel, reportParameterMsg, buttonGroup" />
					<f:facet name="header">报表参数列表</f:facet>

					<p:column headerText="参数编码">
						<h:outputText value="#{reportParameter.reportParameterCode}" />
					</p:column>

					<p:column headerText="参数显示名称">
						<h:outputText value="#{reportParameter.uiLabel}" />
					</p:column>

					<p:column headerText="字段类型">
						<h:outputText value="#{reportParameter.javaDataType}" />
					</p:column>

					<p:column headerText="控件类型">
						<h:outputText value="#{reportParameter.uiType}" />
					</p:column>

					<p:column headerText="参数默认值">
						<h:outputText value="#{reportParameter.defaultValue}" />
					</p:column>

					<p:column headerText="参数默认类型">
						<h:outputText value="#{reportParameter.defaultValueType}" />
					</p:column>

				</p:dataTable>
			</h:panelGroup>
			<div style="text-align: center; margin: 10px 0;">
				<p:commandButton value="关闭" onclick="reportParameterDialog.hide()" immediate="true" image="ui-icon ui-icon-cancel" />
			</div>
		</p:dialog>
	</h:form>

</ui:composition>
